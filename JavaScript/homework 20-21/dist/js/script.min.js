!function(){var a={};this.tmpl=function b(c,d){var e=/\W/.test(c)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+c.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):a[c]=a[c]||b(document.getElementById(c).innerHTML);return d?e(d):e}}(),$(function(){var a=$("#testing").html(),b={headerTitle:"Тест по программированию",questions:[{title:"Вопроc №1",options:["Ответ№1","Ответ№2","Правильный ответ№3"],trueValue:[2]},{title:"Вопроc №2",options:["Правильный ответ№1","Ответ№2","Ответ№3"],trueValue:[0]},{title:"Вопроc №3",options:["Правильный ответ№1","Правильный ответ№2","Ответ№3","Ответ№4"],trueValue:[0,1]},{title:"Вопроc №4",options:["Ответ№1","Ответ№2","Правильный ответ№3","Правильный ответ№4"],trueValue:[2,3]}],submit:"Проверить мои результаты"},c=tmpl(a,b);$("body").append(c),localStorage.setItem("testing",JSON.stringify(b));var d=localStorage.getItem("testing");d=JSON.parse(d),console.log(d),$("#submit").on("click",function(){for(var a=document.getElementsByClassName("test__item"),b=JSON.parse(localStorage.getItem("testing")),c=document.querySelector("#modal-body"),d="",e=function(b){d+="<div><p>Block of questions #"+parseInt(b+1)+" has errors. Please, check answers. =(</p></div>",a[b].classList.add("errored")},f=function(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1},g=function(b,c,d){a[b].classList.add(c),d&&e(b)},h=0;h<a.length;h++){for(var i=b.questions[h].trueValue,j=i.length,k=a[h].getElementsByTagName("input"),l=0,m=0,n=0;n<k.length;n++){var o=k[n];if(1==o.checked)if(f(i,n)){if(1==j){g(h,"successed");break}}else{if(!(j>1)){g(h,"errored",1);break}l++}else m++;if(m==k.length){g(h,"errored",1);break}}l&&g(h,"errored",1)}d||(d="<div><p>All your answers are correct!</p></div>"),d+='<button onClick="reloadPage()">Close me!</button>',c.innerHTML=d;var p=document.querySelector(".test");p.style.opacity="0.3",c.style.display="block"})});var reloadPage=function(){return document.location.href=document.location.href},createRightAnswers=function(a){var b={};return a.questions.forEach(function(a,c){b["question"+c]=a.trueValue}),b};